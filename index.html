<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEAR MAN Decoded - Interactive Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #4CAF50;
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .dear-man-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .letter-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .letter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .letter-card.completed {
            border-left: 5px solid #4CAF50;
        }

        .letter-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .letter-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-right: 15px;
        }

        .letter-title {
            flex: 1;
        }

        .letter-title h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .letter-title p {
            color: #666;
            font-size: 0.9rem;
        }

        .letter-content {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .letter-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .example-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }

        .good-example {
            border-left-color: #28a745;
            background: #d4edda;
        }

        .bad-example {
            border-left-color: #dc3545;
            background: #f8d7da;
        }

        .practice-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .scenario-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .scenario-input {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .scenario-output {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        .case-studies {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .case-study {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .case-study h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .troubleshooting {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .troubleshooting h3 {
            color: #dc3545;
            margin-bottom: 20px;
        }

        .help-tip {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .completion-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .completion-badge.show {
            opacity: 1;
        }

        .interactive-demo {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .demo-scenario {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .step-indicator {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .scenario-builder {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .dear-man-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DEAR MAN Decoded</h1>
            <p>Master Assertive Communication Through Interactive Practice</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="dear-man-grid">
            <div class="letter-card" data-letter="D" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #e74c3c;">D</div>
                    <div class="letter-title">
                        <h3>DESCRIBE</h3>
                        <p>State the facts objectively</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Present the situation using only observable facts, without interpretation or emotion.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> "You arrived 30 minutes after our scheduled meeting time."
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> "You're always late and don't respect my time."
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Factual descriptions reduce defensiveness and create a foundation for productive dialogue. They minimize the risk of escalation by avoiding blame and interpretation.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Use specific, observable behaviors</li>
                        <li>Include time, place, and context</li>
                        <li>Avoid emotional language or assumptions</li>
                        <li>Focus on what happened, not why it happened</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="E" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #f39c12;">E</div>
                    <div class="letter-title">
                        <h3>EXPRESS</h3>
                        <p>Share your feelings with "I" statements</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Communicate your emotional experience using personal ownership language.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> "I feel frustrated and worried when meetings start late because it affects my schedule."
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> "You make me angry when you're late."
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> "I" statements promote emotional regulation and prevent blame. They help the speaker take responsibility for their emotions while clearly communicating their experience.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Use "I feel..." statements</li>
                        <li>Be specific about emotions</li>
                        <li>Connect feelings to specific behaviors</li>
                        <li>Avoid "you make me feel" language</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="A" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #27ae60;">A</div>
                    <div class="letter-title">
                        <h3>ASSERT</h3>
                        <p>Make clear, specific requests</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Clearly state what you want or need, or set appropriate boundaries.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> "I need you to arrive on time for our scheduled meetings."
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> "Maybe you could try to be more punctual sometimes."
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Clear assertions prevent misunderstandings and increase the likelihood of needs being met. Vague requests often lead to unmet expectations and repeated conflicts.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Be specific and concrete</li>
                        <li>Use direct language</li>
                        <li>Avoid hedging words like "maybe" or "kind of"</li>
                        <li>State what you want, not what you don't want</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="R" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #3498db;">R</div>
                    <div class="letter-title">
                        <h3>REINFORCE</h3>
                        <p>Explain the positive outcomes</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Motivate compliance by explaining the benefits of agreeing to your request.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> "When we start on time, we can cover everything efficiently and both have more time for other priorities."
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> "If you don't start being on time, I'll have to report this to your supervisor."
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Positive reinforcement is more effective than threats. It helps the other person understand the value and creates intrinsic motivation for behavior change.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Focus on mutual benefits</li>
                        <li>Avoid threats or ultimatums</li>
                        <li>Make benefits concrete and relevant</li>
                        <li>Consider the other person's motivations</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="M" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #9b59b6;">M</div>
                    <div class="letter-title">
                        <h3>MINDFUL</h3>
                        <p>Stay focused on your goal</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Maintain focus on your objective despite distractions, guilt trips, or derailment attempts.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> Using the "broken record" technique - calmly repeating your request when faced with distractions.
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> Getting pulled into side arguments or historical grievances.
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Mindfulness prevents emotional reactivity and keeps conversations productive. It's essential for maintaining therapeutic boundaries and achieving communication goals.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Ignore attacks or irrelevant comments</li>
                        <li>Don't justify over and over</li>
                        <li>Keep bringing conversation back to your request</li>
                        <li>Stay calm and centered</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="A2" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #e67e22;">A</div>
                    <div class="letter-title">
                        <h3>APPEAR CONFIDENT</h3>
                        <p>Project confidence through body language</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Use nonverbal communication to support your message and increase the likelihood of being taken seriously.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> Steady eye contact, upright posture, calm and even tone of voice.
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> Looking down, fidgeting, speaking too quietly or apologetically.
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Congruent nonverbal communication strengthens the message and increases credibility. Confident body language can also help the speaker feel more confident internally.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Maintain appropriate eye contact</li>
                        <li>Keep your voice steady and clear</li>
                        <li>Stand or sit up straight</li>
                        <li>Avoid apologetic tone unless actually apologizing</li>
                    </ul>
                </div>
            </div>

            <div class="letter-card" data-letter="N" onclick="toggleCard(this)">
                <div class="completion-badge">‚úì</div>
                <div class="letter-header">
                    <div class="letter-icon" style="background: #1abc9c;">N</div>
                    <div class="letter-title">
                        <h3>NEGOTIATE</h3>
                        <p>Be willing to compromise</p>
                    </div>
                </div>
                <div class="letter-content">
                    <p><strong>Purpose:</strong> Show flexibility and willingness to find mutually acceptable solutions when appropriate.</p>
                    
                    <div class="example-box good-example">
                        <strong>‚úì Good:</strong> "I understand you have challenges with morning meetings. Could we try starting 15 minutes later, or would afternoon work better?"
                    </div>
                    
                    <div class="example-box bad-example">
                        <strong>‚úó Avoid:</strong> "This is the only way it can work. Take it or leave it."
                    </div>
                    
                    <p><strong>Clinical Rationale:</strong> Flexibility demonstrates respect for the other person's needs and increases cooperation. However, important boundaries should not be negotiated away.</p>
                    
                    <p><strong>Key Techniques:</strong></p>
                    <ul>
                        <li>Ask what would work for them</li>
                        <li>Offer alternatives when possible</li>
                        <li>Know your non-negotiables in advance</li>
                        <li>Look for win-win solutions</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="interactive-demo">
            <h2>üé≠ Interactive Practice Scenario</h2>
            <p>Apply DEAR MAN to real situations</p>
            
            <div class="demo-scenario">
                <h4>Current Scenario: Workplace Boundary Setting</h4>
                <p><strong>Situation:</strong> Your colleague frequently interrupts you during focused work time to ask non-urgent questions.</p>
                
                <div id="dearManDemo">
                    <div class="step-indicator">Click each letter above to build your response</div>
                </div>
                
                <button class="btn btn-success" onclick="generateResponse()">Generate DEAR MAN Response</button>
                <button class="btn" onclick="newScenario()">Try Different Scenario</button>
            </div>
        </div>

        <div class="practice-section">
            <h2>üõ†Ô∏è Scenario Builder</h2>
            <p>Create and practice your own DEAR MAN scenarios</p>
            
            <div class="scenario-builder">
                <div class="scenario-input">
                    <h3>Build Your Scenario</h3>
                    
                    <div class="input-group">
                        <label for="scenarioType">Scenario Type:</label>
                        <select id="scenarioType" onchange="updateScenarioTemplate()">
                            <option value="workplace">Workplace Conflict</option>
                            <option value="family">Family Relationship</option>
                            <option value="friend">Friendship Issue</option>
                            <option value="romantic">Romantic Partner</option>
                            <option value="service">Customer Service</option>
                            <option value="healthcare">Healthcare Setting</option>
                            <option value="custom">Custom Scenario</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="situationDesc">Describe the Situation:</label>
                        <textarea id="situationDesc" rows="3" placeholder="What happened? Stick to observable facts..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="yourFeelings">Your Feelings:</label>
                        <input type="text" id="yourFeelings" placeholder="I feel... (frustrated, worried, confused, etc.)">
                    </div>
                    
                    <div class="input-group">
                        <label for="yourRequest">What You Want:</label>
                        <input type="text" id="yourRequest" placeholder="I need/want you to...">
                    </div>
                    
                    <div class="input-group">
                        <label for="benefits">Benefits/Reinforcement:</label>
                        <input type="text" id="benefits" placeholder="This will help because...">
                    </div>
                    
                    <button class="btn" onclick="buildDearMan()">Build DEAR MAN Response</button>
                </div>
                
                <div class="scenario-output">
                    <h3>Your DEAR MAN Response</h3>
                    <div id="generatedResponse">
                        <p style="color: #666; font-style: italic;">Fill out the scenario details and click "Build DEAR MAN Response" to see your structured communication.</p>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveScenario()" style="display: none;" id="saveBtn">Save This Scenario</button>
                        <button class="btn" onclick="practiceAgain()">Practice Again</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="case-studies">
            <div class="case-study">
                <h4>üìã Case Study 1: Healthcare Advocacy</h4>
                <p><strong>Background:</strong> Patient feeling rushed during medical appointments.</p>
                
                <p><strong>DEAR MAN Application:</strong></p>
                <p><strong>D:</strong> "Doctor, during our last three appointments, we've spent less than 10 minutes together, and I haven't been able to ask my questions."</p>
                <p><strong>E:</strong> "I feel anxious and unheard when I don't get to discuss my concerns."</p>
                <p><strong>A:</strong> "I need more time to discuss my symptoms and ask questions about my treatment."</p>
                <p><strong>R:</strong> "This will help me better understand my care and follow your recommendations effectively."</p>
                <p><strong>MAN:</strong> Stay focused on the need for adequate appointment time, project confidence through clear communication, and be willing to discuss scheduling options.</p>
                
                <p><strong>Outcome:</strong> Doctor acknowledged the concern and scheduled longer appointments for complex issues.</p>
            </div>

            <div class="case-study">
                <h4>üè¢ Case Study 2: Workplace Boundaries</h4>
                <p><strong>Background:</strong> Manager consistently giving assignments at end of day for next morning.</p>
                
                <p><strong>DEAR MAN Application:</strong></p>
                <p><strong>D:</strong> "In the past two weeks, I've received four urgent assignments after 5 PM that were needed first thing the next morning."</p>
                <p><strong>E:</strong> "I feel stressed because it's difficult to plan my evening and ensure quality work."</p>
                <p><strong>A:</strong> "I need advance notice for assignments when possible, ideally by 3 PM for next-day deadlines."</p>
                <p><strong>R:</strong> "This will allow me to deliver higher quality work and maintain better work-life balance."</p>
                <p><strong>MAN:</strong> Stay focused despite potential pushback about "flexibility," maintain professional confidence, negotiate alternatives for truly urgent situations.</p>
                
                <p><strong>Outcome:</strong> Manager implemented a planning process for better advance notice of assignments.</p>
            </div>

            <div class="case-study">
                <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Case Study 3: Family Dynamics</h4>
                <p><strong>Background:</strong> Adult child setting boundaries with parents about unsolicited advice.</p>
                
                <p><strong>DEAR MAN Application:</strong></p>
                <p><strong>D:</strong> "During family gatherings, you often give me advice about my career, finances, and lifestyle choices without me asking."</p>
                <p><strong>E:</strong> "I feel frustrated and like my autonomy isn't respected."</p>
                <p><strong>A:</strong> "I'd like you to ask if I want advice before offering it."</p>
                <p><strong>R:</strong> "This will help our conversations feel more supportive and improve our relationship."</p>
                <p><strong>MAN:</strong> Stay focused on the boundary despite guilt trips, maintain loving but firm tone, negotiate areas where advice is welcome.</p>
                
                <p><strong>Outcome:</strong> Parents gradually learned to ask before advising, reducing family tension.</p>
            </div>
        </div>

        <div class="troubleshooting">
            <h3>üö® Troubleshooting Common DEAR MAN Challenges</h3>
            
            <div class="help-tip">
                <strong>Problem:</strong> "The other person gets defensive immediately"<br>
                <strong>Solution:</strong> Check your "Describe" - are you using judgmental language? Stick to observable facts only. Also review your tone and body language for the "Appear Confident" component.
            </div>
            
            <div class="help-tip">
                <strong>Problem:</strong> "I feel like I'm being too demanding"<br>
                <strong>Solution:</strong> This often indicates difficulty with assertiveness. Remember that stating your needs clearly is healthy, not demanding. Practice the difference between assertive, aggressive, and passive communication styles.
            </div>
            
            <div class="help-tip">
                <strong>Problem:</strong> "They keep changing the subject"<br>
                <strong>Solution:</strong> This is where "Mindful" becomes crucial. Use the broken record technique: "I understand that's important too, but right now I need to discuss [your original topic]."
            </div>
            
            <div class="help-tip">
                <strong>Problem:</strong> "I forget what I wanted to say when I get emotional"<br>
                <strong>Solution:</strong> Practice ahead of time. Write out your DEAR MAN script for important conversations. Take breaks if emotions become overwhelming.
            </div>
            
            <div class="help-tip">
                <strong>Problem:</strong> "It doesn't work with manipulative people"<br>
                <strong>Solution:</strong> DEAR MAN isn't about changing others; it's about clear communication. With manipulative individuals, focus heavily on "Mindful" and "Appear Confident." You may need additional boundary-setting skills.
            </div>
            
            <div class="help-tip">
                <strong>Problem:</strong> "I feel guilty for having needs"<br>
                <strong>Solution:</strong> This suggests underlying issues with self-worth. Remember that everyone has legitimate needs. Consider exploring this pattern in therapy alongside practicing DEAR MAN.
            </div>
        </div>

        <div class="practice-section">
            <h2>üìà Progress Tracking</h2>
            <p>Track your DEAR MAN skill development</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                    <h4>Scenarios Completed</h4>
                    <div style="font-size: 2rem; font-weight: bold; color: #667eea;" id="completedScenarios">0</div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                    <h4>Components Mastered</h4>
                    <div style="font-size: 2rem; font-weight: bold; color: #28a745;" id="masteredComponents">0/7</div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                    <h4>Practice Streak</h4>
                    <div style="font-size: 2rem; font-weight: bold; color: #f39c12;" id="practiceStreak">0 days</div>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <button class="btn" onclick="resetProgress()">Reset Progress</button>
                <button class="btn btn-success" onclick="exportProgress()">Export Progress</button>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        let completedComponents = new Set();
        let scenarios = [];
        let currentProgress = {
            completed: 0,
            mastered: 0,
            streak: 0
        };

        // Initialize the application
        function initializeApp() {
            loadProgress();
            updateProgressDisplay();
        }

        // Toggle card expansion and mark as completed
        function toggleCard(card) {
            const content = card.querySelector('.letter-content');
            const badge = card.querySelector('.completion-badge');
            const letter = card.dataset.letter;
            
            // Toggle content visibility
            content.classList.toggle('active');
            
            // Mark as completed
            if (!completedComponents.has(letter)) {
                completedComponents.add(letter);
                card.classList.add('completed');
                badge.classList.add('show');
                updateProgress();
            }
        }

        // Update progress bar and statistics
        function updateProgress() {
            const progressPercent = (completedComponents.size / 7) * 100;
            document.getElementById('progressFill').style.width = progressPercent + '%';
            
            currentProgress.mastered = completedComponents.size;
            updateProgressDisplay();
            saveProgress();
        }

        // Update progress display
        function updateProgressDisplay() {
            document.getElementById('completedScenarios').textContent = currentProgress.completed;
            document.getElementById('masteredComponents').textContent = `${currentProgress.mastered}/7`;
            document.getElementById('practiceStreak').textContent = `${currentProgress.streak} days`;
        }

        // Build DEAR MAN response from user input
        function buildDearMan() {
            const situation = document.getElementById('situationDesc').value;
            const feelings = document.getElementById('yourFeelings').value;
            const request = document.getElementById('yourRequest').value;
            const benefits = document.getElementById('benefits').value;
            
            if (!situation || !feelings || !request) {
                alert('Please fill in the basic scenario details (situation, feelings, and request).');
                return;
            }
            
            const response = generateDearManResponse(situation, feelings, request, benefits);
            document.getElementById('generatedResponse').innerHTML = response;
            document.getElementById('saveBtn').style.display = 'inline-block';
            
            // Increment completed scenarios
            currentProgress.completed++;
            updateProgressDisplay();
            saveProgress();
        }

        // Generate structured DEAR MAN response
        function generateDearManResponse(describe, express, assert, reinforce) {
            return `
                <div style="background: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">Your DEAR MAN Response:</h4>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #e74c3c;">üìã DESCRIBE:</strong><br>
                        "${describe}"
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #f39c12;">üí≠ EXPRESS:</strong><br>
                        "I feel ${express} when this happens."
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #27ae60;">üí™ ASSERT:</strong><br>
                        "${assert}"
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #3498db;">üéÅ REINFORCE:</strong><br>
                        "${reinforce || 'This will help improve our communication and relationship.'}"
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong style="color: #666;">Remember MAN:</strong><br>
                        <strong>Mindful:</strong> Stay focused on your request<br>
                        <strong>Appear Confident:</strong> Use strong body language and tone<br>
                        <strong>Negotiate:</strong> Be open to reasonable compromises
                    </div>
                </div>
            `;
        }

        // Generate demo response for interactive scenario
        function generateResponse() {
            const demoResponse = `
                <div style="background: rgba(255,255,255,0.9); color: #333; padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>DEAR MAN Response - Workplace Interruption:</h4>
                    <p><strong>D:</strong> "I've noticed that over the past week, I've been interrupted during my focused work blocks about 4-5 times per day with non-urgent questions."</p>
                    <p><strong>E:</strong> "I feel frustrated and find it difficult to concentrate when I'm constantly switching between tasks."</p>
                    <p><strong>A:</strong> "I'd like to set up specific times when I'm available for questions, like right after lunch and at 4 PM."</p>
                    <p><strong>R:</strong> "This will help me be more productive and give you better quality answers when I'm fully focused."</p>
                    <p><strong>MAN:</strong> Stay focused if they say you're being inflexible, maintain confident but friendly tone, negotiate urgent vs. non-urgent definitions.</p>
                </div>
            `;
            document.getElementById('dearManDemo').innerHTML = demoResponse;
        }

        // Load different scenario for practice
        function newScenario() {
            const scenarios = [
                "Your roommate leaves dishes in the sink for days",
                "Family member makes comments about your appearance",
                "Coworker takes credit for your ideas in meetings", 
                "Friend consistently cancels plans at the last minute",
                "Partner spends money without discussing major purchases",
                "Neighbor plays loud music late at night"
            ];
            
            const randomScenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            document.getElementById('dearManDemo').innerHTML = `
                <div class="step-indicator">New Scenario: ${randomScenario}</div>
                <p style="margin-top: 15px;">How would you apply DEAR MAN to this situation?</p>
            `;
        }

        // Update scenario template based on type
        function updateScenarioTemplate() {
            const scenarioType = document.getElementById('scenarioType').value;
            const templates = {
                workplace: "During our team meeting yesterday, you interrupted me three times while I was presenting my project update.",
                family: "When we had dinner last Sunday, you made several comments about my career choices.",
                friend: "You've canceled our plans at the last minute three times in the past month.",
                romantic: "When we discussed our weekend plans yesterday, you made the decision without asking for my input.",
                service: "When I called customer service yesterday, I was transferred four times and never got my issue resolved.",
                healthcare: "During my appointment last week, I felt rushed and wasn't able to ask my questions."
            };
            
            if (templates[scenarioType]) {
                document.getElementById('situationDesc').value = templates[scenarioType];
            }
        }

        // Save scenario for future reference
        function saveScenario() {
            const scenario = {
                type: document.getElementById('scenarioType').value,
                situation: document.getElementById('situationDesc').value,
                feelings: document.getElementById('yourFeelings').value,
                request: document.getElementById('yourRequest').value,
                benefits: document.getElementById('benefits').value,
                timestamp: new Date().toISOString()
            };
            
            scenarios.push(scenario);
            saveProgress();
            alert('Scenario saved! You can review it later in your progress tracking.');
        }

        // Reset practice for new scenario
        function practiceAgain() {
            document.getElementById('situationDesc').value = '';
            document.getElementById('yourFeelings').value = '';
            document.getElementById('yourRequest').value = '';
            document.getElementById('benefits').value = '';
            document.getElementById('generatedResponse').innerHTML = '<p style="color: #666; font-style: italic;">Fill out the scenario details and click "Build DEAR MAN Response" to see your structured communication.</p>';
            document.getElementById('saveBtn').style.display = 'none';
        }

        // Save progress to localStorage
        function saveProgress() {
            const progressData = {
                completedComponents: Array.from(completedComponents),
                scenarios: scenarios,
                currentProgress: currentProgress,
                lastVisit: new Date().toISOString()
            };
            localStorage.setItem('dearManProgress', JSON.stringify(progressData));
        }

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('dearManProgress');
            if (saved) {
                const progressData = JSON.parse(saved);
                completedComponents = new Set(progressData.completedComponents || []);
                scenarios = progressData.scenarios || [];
                currentProgress = progressData.currentProgress || { completed: 0, mastered: 0, streak: 0 };
                
                // Mark completed components
                completedComponents.forEach(letter => {
                    const card = document.querySelector(`[data-letter="${letter}"]`);
                    if (card) {
                        card.classList.add('completed');
                        card.querySelector('.completion-badge').classList.add('show');
                    }
                });
                
                updateProgress();
            }
        }

        // Reset all progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                localStorage.removeItem('dearManProgress');
                completedComponents.clear();
                scenarios = [];
                currentProgress = { completed: 0, mastered: 0, streak: 0 };
                
                // Reset UI
                document.querySelectorAll('.letter-card').forEach(card => {
                    card.classList.remove('completed');
                    card.querySelector('.completion-badge').classList.remove('show');
                    card.querySelector('.letter-content').classList.remove('active');
                });
                
                updateProgress();
                alert('Progress reset successfully!');
            }
        }

        // Export progress data
        function exportProgress() {
            const progressData = {
                completedComponents: Array.from(completedComponents),
                scenarios: scenarios,
                currentProgress: currentProgress,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(progressData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'dear-man-progress.json';
            link.click();
            
            URL.revokeObjectURL(url);
        }

        // Initialize the application when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>